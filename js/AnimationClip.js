import{M as t}from"./MathUtils.js";import{bs as e,bv as r,bw as n,bu as i,bz as o,bA as s,bB as a,br as c}from"./constants.js";import{Q as l}from"./Quaternion.js";function u(t,e,r,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(r),this.sampleValues=e,this.valueSize=r}function h(t,e,r,n){u.call(this,t,e,r,n)}Object.assign(u.prototype,{evaluate:function(t){let e=this.parameterPositions,r=this._cachedIndex,n=e[r],i=e[r-1];t:{e:{let o;r:{n:if(!(t<n)){for(let o=r+2;;){if(void 0===n){if(t<i)break n;return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,t,i)}if(r===o)break;if(i=n,n=e[++r],t<n)break e}o=e.length;break r}if(t>=i)break t;{const s=e[1];t<s&&(r=2,i=s);for(let o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(r===o)break;if(n=i,i=e[--r-1],t>=i)break e}o=r,r=0}}for(;r<o;){const n=r+o>>>1;t<e[n]?o=n:r=n+1}if(n=e[r],i=e[r-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return r=e.length,this._cachedIndex=r,this.afterEnd_(r-1,i,t)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=t*n;for(let t=0;t!==n;++t)e[t]=r[i+t];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(u.prototype,{beforeStart_:u.prototype.copySampleValue_,afterEnd_:u.prototype.copySampleValue_}),h.prototype=Object.assign(Object.create(u.prototype),{constructor:h,interpolate_:function(t,e,r,n){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=(r-e)/(n-e),u=1-l;for(let t=0;t!==s;++t)i[t]=o[c+t]*u+o[a+t]*l;return i}});const f=new RegExp("[\\[\\]\\.:\\/]","g"),p="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",d=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),m=/(WCOD+)?/.source.replace("WCOD",p),y=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),g=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),b=new RegExp("^"+d+m+y+g+"$"),v=["material","materials","bones"];function N(t,e,r){const n=r||_.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function _(t,e,r){this.path=e,this.parsedPath=r||_.parseTrackName(e),this.node=_.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(N.prototype,{getValue:function(t,e){this.bind();const r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){const r=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,r=t.length;e!==r;++e)t[e].unbind()}}),Object.assign(_,{Composite:N,create:function(t,e,r){return t&&t.isAnimationObjectGroup?new _.Composite(t,e,r):new _(t,e,r)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(f,"")},parseTrackName:function(t){const e=b.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const t=r.nodeName.substring(n+1);-1!==v.indexOf(t)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=t)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(e);if(void 0!==r)return r}if(t.children){const r=function(t){for(let n=0;n<t.length;n++){const i=t[n];if(i.name===e||i.uuid===e)return i;const o=r(i.children);if(o)return o}return null},n=r(t.children);if(n)return n}return null}}),Object.assign(_.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)t[e++]=r[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=t[e++]},function(t,e){const r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node,e=this.parsedPath,r=e.objectName,n=e.propertyName,i=e.propertyIndex;if(t||(t=_.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return;if(r){let n=e.objectIndex;switch(r){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===n){n=e;break}break;default:if(void 0===t[r])return;t=t[r]}if(void 0!==n){if(void 0===t[n])return;t=t[n]}}const o=t[n];if(void 0===o){e.nodeName;return}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!t.geometry)return;if(!t.geometry.isBufferGeometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[i]&&(i=t.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(_.prototype,{_getValue_unbound:_.prototype.getValue,_setValue_unbound:_.prototype.setValue});const k={arraySlice:function(t,e,r){return k.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==r?r:t.length)):t.slice(e,r)},convertArray:function(t,e,r){return!t||!r&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,r=new Array(e);for(let t=0;t!==e;++t)r[t]=t;return r.sort((function(e,r){return t[e]-t[r]})),r},sortedArray:function(t,e,r){const n=t.length,i=new t.constructor(n);for(let o=0,s=0;s!==n;++o){const n=r[o]*e;for(let r=0;r!==e;++r)i[s++]=t[n+r]}return i},flattenJSON:function(t,e,r,n){let i=1,o=t[0];for(;void 0!==o&&void 0===o[n];)o=t[i++];if(void 0===o)return;let s=o[n];if(void 0!==s)if(Array.isArray(s))do{s=o[n],void 0!==s&&(e.push(o.time),r.push.apply(r,s)),o=t[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[n],void 0!==s&&(e.push(o.time),s.toArray(r,r.length)),o=t[i++]}while(void 0!==o);else do{s=o[n],void 0!==s&&(e.push(o.time),r.push(s)),o=t[i++]}while(void 0!==o)},subclip:function(t,e,r,n,i){i=i||30;const o=t.clone();o.name=e;const s=[];for(let t=0;t<o.tracks.length;++t){const e=o.tracks[t],a=e.getValueSize(),c=[],l=[];for(let t=0;t<e.times.length;++t){const o=e.times[t]*i;if(!(o<r||o>=n)){c.push(e.times[t]);for(let r=0;r<a;++r)l.push(e.values[t*a+r])}}0!==c.length&&(e.times=k.convertArray(c,e.times.constructor),e.values=k.convertArray(l,e.values.constructor),s.push(e))}o.tracks=s;let a=1/0;for(let t=0;t<o.tracks.length;++t)a>o.tracks[t].times[0]&&(a=o.tracks[t].times[0]);for(let t=0;t<o.tracks.length;++t)o.tracks[t].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=t),(void 0===i||i<=0)&&(i=30);const o=t.tracks.length,s=r/i;for(let e=0;e<o;++e){const r=n.tracks[e],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=t.tracks.find((function(t){return t.name===r.name&&t.ValueTypeName===i}));if(void 0===o)continue;const a=r.getValueSize(),c=r.times.length-1;let u;if(s<=r.times[0])u=k.arraySlice(r.values,0,r.valueSize);else if(s>=r.times[c]){const t=c*a;u=k.arraySlice(r.values,t)}else{const t=r.createInterpolant();t.evaluate(s),u=t.resultBuffer}if("quaternion"===i){new l(u[0],u[1],u[2],u[3]).normalize().conjugate().toArray(u)}const h=o.times.length;for(let t=0;t<h;++t){const e=t*a;if("quaternion"===i)l.multiplyQuaternionsFlat(o.values,e,u,0,o.values,e);else for(let t=0;t<a;++t)o.values[e+t]-=u[t]}}return t.blendMode=e,t}};function V(t,e,r,n){u.call(this,t,e,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function S(t,e,r,n){u.call(this,t,e,r,n)}function O(t,e,r,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=k.convertArray(e,this.TimeBufferType),this.values=k.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function w(t,e,r){O.call(this,t,e,r)}function T(t,e,r,n){O.call(this,t,e,r,n)}function I(t,e,r,n){O.call(this,t,e,r,n)}function j(t,e,r,n){u.call(this,t,e,r,n)}function A(t,e,r,n){O.call(this,t,e,r,n)}function x(t,e,r,n){O.call(this,t,e,r,n)}function B(t,e,r,n){O.call(this,t,e,r,n)}function M(e,r,n,i){this.name=e,this.tracks=n,this.duration=void 0!==r?r:-1,this.blendMode=void 0!==i?i:c,this.uuid=t.generateUUID(),this.duration<0&&this.resetDuration()}function E(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return I;case"vector":case"vector2":case"vector3":case"vector4":return B;case"color":return T;case"quaternion":return A;case"bool":case"boolean":return w;case"string":return x}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],r=[];k.flattenJSON(t.keys,e,r,"value"),t.times=e,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}V.prototype=Object.assign(Object.create(u.prototype),{constructor:V,DefaultSettings_:{endingStart:r,endingEnd:r},intervalChanged_:function(t,e,r){let o=this.parameterPositions,s=t-2,a=t+1,c=o[s],l=o[a];if(void 0===c)switch(this.getSettings_().endingStart){case i:s=t,c=2*e-r;break;case n:s=o.length-2,c=e+o[s]-o[s+1];break;default:s=t,c=r}if(void 0===l)switch(this.getSettings_().endingEnd){case i:a=t,l=2*r-e;break;case n:a=1,l=r+o[1]-o[0];break;default:a=t-1,l=e}const u=.5*(r-e),h=this.valueSize;this._weightPrev=u/(e-c),this._weightNext=u/(l-r),this._offsetPrev=s*h,this._offsetNext=a*h},interpolate_:function(t,e,r,n){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,c=a-s,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(r-e)/(n-e),d=p*p,m=d*p,y=-h*m+2*h*d-h*p,g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,b=(-1-f)*m+(1.5+f)*d+.5*p,v=f*m-f*d;for(let t=0;t!==s;++t)i[t]=y*o[l+t]+g*o[c+t]+b*o[a+t]+v*o[u+t];return i}}),S.prototype=Object.assign(Object.create(u.prototype),{constructor:S,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(O,{toJSON:function(t){const e=t.constructor;let r;if(void 0!==e.toJSON)r=e.toJSON(t);else{r={name:t.name,times:k.convertArray(t.times,Array),values:k.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(r.interpolation=e)}return r.type=t.ValueTypeName,r}}),Object.assign(O.prototype,{constructor:O,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:o,InterpolantFactoryMethodDiscrete:function(t){return new S(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new h(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new V(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case a:e=this.InterpolantFactoryMethodDiscrete;break;case o:e=this.InterpolantFactoryMethodLinear;break;case s:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return a;case this.InterpolantFactoryMethodLinear:return o;case this.InterpolantFactoryMethodSmooth:return s}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let r=0,n=e.length;r!==n;++r)e[r]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let r=0,n=e.length;r!==n;++r)e[r]*=t}return this},trim:function(t,e){const r=this.times,n=r.length;let i=0,o=n-1;for(;i!==n&&r[i]<t;)++i;for(;-1!==o&&r[o]>e;)--o;if(++o,0!==i||o!==n){i>=o&&(o=Math.max(o,1),i=o-1);const t=this.getValueSize();this.times=k.arraySlice(r,i,o),this.values=k.arraySlice(this.values,i*t,o*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);const r=this.times,n=this.values,i=r.length;0===i&&(t=!1);let o=null;for(let e=0;e!==i;e++){const n=r[e];if("number"==typeof n&&isNaN(n)){t=!1;break}if(null!==o&&o>n){t=!1;break}o=n}if(void 0!==n&&k.isTypedArray(n))for(let e=0,r=n.length;e!==r;++e){const r=n[e];if(isNaN(r)){t=!1;break}}return t},optimize:function(){const t=k.arraySlice(this.times),e=k.arraySlice(this.values),r=this.getValueSize(),n=this.getInterpolation()===s,i=t.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=t[s];if(a!==t[s+1]&&(1!==s||a!==a[0]))if(n)i=!0;else{const t=s*r,n=t-r,o=t+r;for(let s=0;s!==r;++s){const r=e[t+s];if(r!==e[n+s]||r!==e[o+s]){i=!0;break}}}if(i){if(s!==o){t[o]=t[s];const n=s*r,i=o*r;for(let t=0;t!==r;++t)e[i+t]=e[n+t]}++o}}if(i>0){t[o]=t[i];for(let t=i*r,n=o*r,s=0;s!==r;++s)e[n+s]=e[t+s];++o}return o!==t.length?(this.times=k.arraySlice(t,0,o),this.values=k.arraySlice(e,0,o*r)):(this.times=t,this.values=e),this},clone:function(){const t=k.arraySlice(this.times,0),e=k.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}),w.prototype=Object.assign(Object.create(O.prototype),{constructor:w,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:a,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),T.prototype=Object.assign(Object.create(O.prototype),{constructor:T,ValueTypeName:"color"}),I.prototype=Object.assign(Object.create(O.prototype),{constructor:I,ValueTypeName:"number"}),j.prototype=Object.assign(Object.create(u.prototype),{constructor:j,interpolate_:function(t,e,r,n){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(r-e)/(n-e);let c=t*s;for(let t=c+s;c!==t;c+=4)l.slerpFlat(i,0,o,c-s,o,c,a);return i}}),A.prototype=Object.assign(Object.create(O.prototype),{constructor:A,ValueTypeName:"quaternion",DefaultInterpolation:o,InterpolantFactoryMethodLinear:function(t){return new j(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),x.prototype=Object.assign(Object.create(O.prototype),{constructor:x,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:a,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),B.prototype=Object.assign(Object.create(O.prototype),{constructor:B,ValueTypeName:"vector"}),Object.assign(M,{parse:function(t){const e=[],r=t.tracks,n=1/(t.fps||1);for(let t=0,i=r.length;t!==i;++t)e.push(E(r[t]).scale(n));return new M(t.name,t.duration,e,t.blendMode)},toJSON:function(t){const e=[],r=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,n=r.length;t!==n;++t)e.push(O.toJSON(r[t]));return n},CreateFromMorphTargetSequence:function(t,e,r,n){const i=e.length,o=[];for(let t=0;t<i;t++){let s=[],a=[];s.push((t+i-1)%i,t,(t+1)%i),a.push(0,1,0);const c=k.getKeyframeOrder(s);s=k.sortedArray(s,1,c),a=k.sortedArray(a,1,c),n||0!==s[0]||(s.push(i),a.push(a[0])),o.push(new I(".morphTargetInfluences["+e[t].name+"]",s,a).scale(1/r))}return new M(t,-1,o)},findByName:function(t,e){let r=t;if(!Array.isArray(t)){const e=t;r=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<r.length;t++)if(r[t].name===e)return r[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,r){const n={},i=/^([\w-]*?)([\d]+)$/;for(let e=0,r=t.length;e<r;e++){const r=t[e],o=r.name.match(i);if(o&&o.length>1){const t=o[1];let e=n[t];e||(n[t]=e=[]),e.push(r)}}const o=[];for(const t in n)o.push(M.CreateFromMorphTargetSequence(t,n[t],e,r));return o},parseAnimation:function(t,e){if(!t)return null;const r=function(t,e,r,n,i){if(0!==r.length){const o=[],s=[];k.flattenJSON(r,o,s,n),0!==o.length&&i.push(new t(e,o,s))}},n=[],i=t.name||"default",o=t.fps||30,s=t.blendMode;let a=t.length||-1;const c=t.hierarchy||[];for(let t=0;t<c.length;t++){const i=c[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let e;for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let r=0;r<i[e].morphTargets.length;r++)t[i[e].morphTargets[r]]=-1;for(const r in t){const t=[],o=[];for(let n=0;n!==i[e].morphTargets.length;++n){const n=i[e];t.push(n.time),o.push(n.morphTarget===r?1:0)}n.push(new I(".morphTargetInfluence["+r+"]",t,o))}a=t.length*(o||1)}else{const o=".bones["+e[t].name+"]";r(B,o+".position",i,"pos",n),r(A,o+".quaternion",i,"rot",n),r(B,o+".scale",i,"scl",n)}}if(0===n.length)return null;return new M(i,a,n,s)}}),Object.assign(M.prototype,{resetDuration:function(){let t=0;for(let e=0,r=this.tracks.length;e!==r;++e){const r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new M(this.name,this.duration,t,this.blendMode)}});export{M as A,u as I,h as L,I as N,_ as P,A as Q,B as V};
//# sourceMappingURL=AnimationClip.js.map
