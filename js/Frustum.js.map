{"version":3,"file":"Frustum.js","sources":["../../node_modules/three/src/objects/Group.js","../../node_modules/three/src/math/Frustum.js"],"sourcesContent":["import { Object3D } from '../core/Object3D.js';\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\nconst _sphere = new Sphere();\nconst _vector = new Vector3();\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromProjectionMatrix: function ( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function ( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSprite: function ( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n\nexport { Frustum };\n"],"names":["Group","Object3D","call","this","type","prototype","Object","assign","create","constructor","isGroup","_sphere","Sphere","_vector","Vector3","Frustum","p0","p1","p2","p3","p4","p5","planes","undefined","Plane","set","copy","clone","frustum","i","setFromProjectionMatrix","m","me","elements","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","normalize","intersectsObject","object","geometry","boundingSphere","computeBoundingSphere","applyMatrix4","matrixWorld","intersectsSphere","intersectsSprite","sprite","center","radius","sphere","negRadius","distanceToPoint","intersectsBox","box","plane","x","normal","max","min","y","z","containsPoint","point"],"mappings":"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"}