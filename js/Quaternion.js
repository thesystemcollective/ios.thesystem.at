import{M as t}from"./MathUtils.js";function i(t=0,i=0,s=0,h=1){this._x=t,this._y=i,this._z=s,this._w=h}Object.assign(i,{slerp:function(t,i,s,h){return s.copy(t).slerp(i,h)},slerpFlat:function(t,i,s,h,n,_,e){let r=s[h+0],o=s[h+1],a=s[h+2],c=s[h+3];const u=n[_+0],l=n[_+1],y=n[_+2],x=n[_+3];if(c!==x||r!==u||o!==l||a!==y){let t=1-e,i=r*u+o*l+a*y+c*x,s=i>=0?1:-1,h=1-i*i;if(h>Number.EPSILON){const n=Math.sqrt(h),_=Math.atan2(n,i*s);t=Math.sin(t*_)/n,e=Math.sin(e*_)/n}const n=e*s;if(r=r*t+u*n,o=o*t+l*n,a=a*t+y*n,c=c*t+x*n,t===1-e){const t=1/Math.sqrt(r*r+o*o+a*a+c*c);r*=t,o*=t,a*=t,c*=t}}t[i]=r,t[i+1]=o,t[i+2]=a,t[i+3]=c},multiplyQuaternionsFlat:function(t,i,s,h,n,_){const e=s[h],r=s[h+1],o=s[h+2],a=s[h+3],c=n[_],u=n[_+1],l=n[_+2],y=n[_+3];return t[i]=e*y+a*c+r*l-o*u,t[i+1]=r*y+a*u+o*c-e*l,t[i+2]=o*y+a*l+e*u-r*c,t[i+3]=a*y-e*c-r*u-o*l,t}}),Object.defineProperties(i.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(i.prototype,{isQuaternion:!0,set:function(t,i,s,h){return this._x=t,this._y=i,this._z=s,this._w=h,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const s=t._x,h=t._y,n=t._z,_=t.order,e=Math.cos,r=Math.sin,o=e(s/2),a=e(h/2),c=e(n/2),u=r(s/2),l=r(h/2),y=r(n/2);switch(_){case"XYZ":this._x=u*a*c+o*l*y,this._y=o*l*c-u*a*y,this._z=o*a*y+u*l*c,this._w=o*a*c-u*l*y;break;case"YXZ":this._x=u*a*c+o*l*y,this._y=o*l*c-u*a*y,this._z=o*a*y-u*l*c,this._w=o*a*c+u*l*y;break;case"ZXY":this._x=u*a*c-o*l*y,this._y=o*l*c+u*a*y,this._z=o*a*y+u*l*c,this._w=o*a*c-u*l*y;break;case"ZYX":this._x=u*a*c-o*l*y,this._y=o*l*c+u*a*y,this._z=o*a*y-u*l*c,this._w=o*a*c+u*l*y;break;case"YZX":this._x=u*a*c+o*l*y,this._y=o*l*c+u*a*y,this._z=o*a*y-u*l*c,this._w=o*a*c-u*l*y;break;case"XZY":this._x=u*a*c-o*l*y,this._y=o*l*c-u*a*y,this._z=o*a*y+u*l*c,this._w=o*a*c+u*l*y}return!1!==i&&this._onChangeCallback(),this},setFromAxisAngle:function(t,i){const s=i/2,h=Math.sin(s);return this._x=t.x*h,this._y=t.y*h,this._z=t.z*h,this._w=Math.cos(s),this._onChangeCallback(),this},setFromRotationMatrix:function(t){const i=t.elements,s=i[0],h=i[4],n=i[8],_=i[1],e=i[5],r=i[9],o=i[2],a=i[6],c=i[10],u=s+e+c;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(a-r)*t,this._y=(n-o)*t,this._z=(_-h)*t}else if(s>e&&s>c){const t=2*Math.sqrt(1+s-e-c);this._w=(a-r)/t,this._x=.25*t,this._y=(h+_)/t,this._z=(n+o)/t}else if(e>c){const t=2*Math.sqrt(1+e-s-c);this._w=(n-o)/t,this._x=(h+_)/t,this._y=.25*t,this._z=(r+a)/t}else{const t=2*Math.sqrt(1+c-s-e);this._w=(_-h)/t,this._x=(n+o)/t,this._y=(r+a)/t,this._z=.25*t}return this._onChangeCallback(),this},setFromUnitVectors:function(t,i){let s=t.dot(i)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()},angleTo:function(i){return 2*Math.acos(Math.abs(t.clamp(this.dot(i),-1,1)))},rotateTowards:function(t,i){const s=this.angleTo(t);if(0===s)return this;const h=Math.min(1,i/s);return this.slerp(t,h),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,i){return void 0!==i?this.multiplyQuaternions(t,i):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){const s=t._x,h=t._y,n=t._z,_=t._w,e=i._x,r=i._y,o=i._z,a=i._w;return this._x=s*a+_*e+h*o-n*r,this._y=h*a+_*r+n*e-s*o,this._z=n*a+_*o+s*r-h*e,this._w=_*a-s*e-h*r-n*o,this._onChangeCallback(),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);const s=this._x,h=this._y,n=this._z,_=this._w;let e=_*t._w+s*t._x+h*t._y+n*t._z;if(e<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,e=-e):this.copy(t),e>=1)return this._w=_,this._x=s,this._y=h,this._z=n,this;const r=1-e*e;if(r<=Number.EPSILON){const t=1-i;return this._w=t*_+i*this._w,this._x=t*s+i*this._x,this._y=t*h+i*this._y,this._z=t*n+i*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(r),a=Math.atan2(o,e),c=Math.sin((1-i)*a)/o,u=Math.sin(i*a)/o;return this._w=_*c+this._w*u,this._x=s*c+this._x*u,this._y=h*c+this._y*u,this._z=n*c+this._z*u,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,i){return void 0===i&&(i=0),this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this},toArray:function(t,i){return void 0===t&&(t=[]),void 0===i&&(i=0),t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t},fromBufferAttribute:function(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});export{i as Q};
//# sourceMappingURL=Quaternion.js.map
